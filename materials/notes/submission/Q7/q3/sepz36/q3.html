<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h3> Online Survey</h3>

    You are being invited to participate in the following survey. You <br>have the right to withdraw from the research
    study at any time.

    <form onsubmit="Check_Form()">
        <Table>
            <tr>
                <td>Phone Number:</td>
                <td> <input type='text' id='phone' /></td>
            </tr>
            <tr>
                <td>Email: </td>
                <td><input type='text' id='email' /></td>
            </tr>
            <tr>
                <td>Birthdate: </td>
                <td><input type="date" id="birthdate" name="birthdate"><br /></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="agree_box"></td>
                <td>I agree with the terms and conditions</td>
            </tr>
            <tr>
                <td><input type='submit' /></td>
            </tr>
        </Table>
    </form>

    <script>
        function Check_Form() {
            const phone = document.getElementById("phone").value;
            const email = document.getElementById("email").value;
            const birthdate = document.getElementById("birthdate").value;
            const agree = document.getElementById("agree_box").checked;

            if (!validatePhone(phone)) {
                alert("Please enter a valid phone number.");
                return false;
            }

            if (!validateEmail(email)) {
                alert("Please enter a valid email address.");
                return false;
            }

            if (!validateDate(birthdate)) {
                alert("Please enter a birthdate before 1 January 2000.");
                return false;
            }

            if (!agree) {
                alert("Please agree to the terms and conditions.");
                return false;
            }

            return true;
        }

        function validatePhone(phone) {
            const regex = /^\+601[0-9]{1}-[0-9]{4}-[0-9]{4}$/; // +6012-2345-67989            
            return regex.test(phone);
        }

        function validateEmail(email) {
            const regex = /^[a-zA-Z0-9_.+-]+@utm\.my$/;
            return regex.test(email);
        }

        function validateDate(dateStr) {
            const regex = /^\d{4}-\d{2}-\d{2}$/;
            if (!regex.test(dateStr)) {
                return false;
            }

            const date = new Date(dateStr);
            const year = date.getFullYear();

            if (year < 2000) {
                return true;
            } else {
                return false;
            }
        }

    </script>
</body>

</html>
